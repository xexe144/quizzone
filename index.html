<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Generate Real Players JSON</title>
</head>
<body>

<h2>Generate players.json from real CSV</h2>
<input type="file" id="csvFile" accept=".csv">

<script>
const flagMap = {
  Argentina:"ar", Portugal:"pt", France:"fr", England:"gb", Brazil:"br",
  Spain:"es", Italy:"it", Germany:"de", Netherlands:"nl", Belgium:"be",
  Norway:"no", Nigeria:"ng", Uruguay:"uy", Croatia:"hr"
};

document.getElementById("csvFile").addEventListener("change", e => {
  const file = e.target.files[0];
  const reader = new FileReader();

  reader.onload = () => {
    const lines = reader.result.split("\n");
    const headers = lines[0].split(",");

    const players = [];

    for(let i=1;i<lines.length && players.length<2000;i++){
      const row = lines[i].split(",");
      if(row.length < headers.length) continue;

      const get = key => row[headers.indexOf(key)] || "";

      const name = get("name") || get("player_name");
      const nation = get("nationality");
      if(!name || !nation) continue;

      players.push({
        name: name.trim(),
        nation: nation.trim(),
        code: flagMap[nation.trim()] || "gb",
        age: parseInt(get("age")) || 25,
        league: get("league") || "Unknown",
        position: (get("position") || "CM").substring(0,2),
        number: Math.floor(Math.random()*30)+1
      });
    }

    const blob = new Blob([JSON.stringify(players,null,2)], {type:"application/json"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = "players.json";
    a.click();

    document.body.innerHTML += "<p>âœ… players.json generated</p>";
  };

  reader.readAsText(file);
});
</script>

</body>
</html>
